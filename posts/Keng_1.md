# pre标签和Grid布局的坑  
> 记录一下这个坑了我差不多一天的（加上半梦半醒）的坑。  

# 问题所在  
pre标签设置为`overflow: auto;`的时候，宽度会超出父元素。导致父元素也变宽。  
# 解决过程  
在坑里迟迟出不来的时候，内心是绝望而无助的。   
一开始的问题只是p元素拉长了宽度，经过搜索后很容易知道，是单词太长了，不好换行的问题。  
然后又出现代码块过长拉长了宽度，看了github手机版之后，很容易知道，只要让它自动出现滚动条，就不会太长了。  
非常可惜，设置了`overflow: auto;` 之后，还是拉长了父元素。于是我就入坑了。。。  

一开始我通过"pre"、"宽度"之类的关键词，搜到了一个问题，里面讲解了为什么pre会把父元素扩张的原因，以及要怎么样才能解决这个问题。我试了一下，确实可以解决我遇到的问题。  
但因为不是很明白其中的道理，于是想看看github是怎么做到pre元素不扩张父容器宽度的。。。    
于是就一个一个禁用css属性的尝试过来，看看到底哪个属性决定了Github手机版的pre元素可以不扩张父容器。经过尝试，发现禁用掉了word-wrap属性，页面就出现滚动条了。  
我以为我找到了另外的方法，我以为我可以用它来实现自己的网页。  
结果当然是不行的。  
**那么到底为什么它的行，我的不行呢？**  
我想可能还受到别的属性影响，于是又去找别的属性，当然也没找到。  
在经过短暂的停歇后，我又想到，可能是他对pre元素内部的code元素加了什么属性吧。于是又去修改code元素CSS。当然，也没效果  
**那到底是为什么呢？**  
我其实在一开始已经知道了可以通过设置`min-width:0`来实现。但是它的问题描述，和我的问题描述不太一样，并不能很好的解释为什么Github可以不用min-width来实现。这让我感到不稳妥。  
冷静一下，我又试着找出这个问题的特征是什么，**是把pre元素设置为`overflow:auto`的时候，会影响父容器宽度，且可以通过设置`min-width：0`来解决**。于是我就想，是不是`overflow:auto`影响了`min-width`，然后我就搜这两个关键词，强迫自己看了几个英文的问题，发现都不是我想要的。  
那再换"pre"和"min-width"关键词搜一下，终于让我发现一个差不多的了。  
通过看解答，发现好像是flex布局的问题，然后我把自己网页的flex布局去掉，也还是不行。  
这时候我没有太慌，因为这个问题跟我的几乎一样了，比之前搜的那些都要稳。  
其实我之前就有想过会不会是我用了Grid布局和Flex布局的问题，但是没有专门搜过，因为也不太清楚要怎么搜索。  
那么现在一搜"grid"+"min-width",就知道，Flex和Grid布局都会自动设置min-width，所以pre的宽度会变大，所以浏览器宽度小到一定程度，元素的宽度就不变了。所以才可以用`min-width:0`来解决这个问题。  
那么，FlexBox是如何自动设置min-width的呢？
https://github.com/w3c/csswg-drafts/issues/1589 这里有详细的解释，但是有一句官方的话看不懂，还是算了吧。  
同时我还从里面发现了**另一个解决方法**。Ding!  
> The workaround for this is replacing 1fr with something like minmax(0%, 1fr)

# 学到了什么  
### 适时停止  
如果我最后没能找到答案，那我可能要在这个问题上花更多的时间，而影响了其他的事。  
在寻找答案的过程中，我十分希望能找到答案，而不知道什么时候才能停止。  
所以，以后请先有思路，再做事。没思路，就先放一放。  
有思路的时候，做到一半，就尽量不要停了。
### 抓住特征很重要  
问题想不出的时候，先分析分析它的特征吧，或许会有帮助。
